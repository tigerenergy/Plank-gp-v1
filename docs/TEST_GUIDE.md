# 🧪 주간보고 기능 테스트 가이드

> **작성일**: 2026-01-21  
> **목적**: 주간보고 기능의 실제 동작 확인 및 검증

---

## 📋 사전 준비

### 1. 환경 변수 확인
```bash
# .env.local 파일에 다음이 설정되어 있어야 합니다:
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 2. 데이터베이스 마이그레이션 확인
- `supabase/migrations/021_add_weekly_reports.sql` 실행 완료 확인
- Supabase 대시보드에서 `weekly_reports` 테이블 존재 확인

### 3. 개발 서버 실행
```bash
npm run dev
```

---

## ✅ 테스트 체크리스트

### Phase 1: 주간보고 작성 페이지 테스트

#### 1.1 페이지 접속
- [ ] 보드 페이지 접속
- [ ] "완료된 작업 보기" 버튼 클릭
- [ ] "주간보고 작성" 버튼 클릭
- [ ] 또는 직접 URL 접속: `/board/[boardId]/weekly-report/new`
- [ ] 페이지가 정상적으로 로드되는지 확인

#### 1.2 자동 수집 데이터 확인
- [ ] 완료된 카드 목록이 표시되는지 확인
- [ ] 진행 중인 카드 목록이 표시되는지 확인
- [ ] 각 카드에 다음 정보가 표시되는지 확인:
  - [ ] 카드 제목
  - [ ] 리스트 이름
  - [ ] 체크리스트 진행률
  - [ ] 댓글 수
  - [ ] 생성일/수정일

#### 1.3 진행 중인 카드 입력
- [ ] 진행 상태 드롭다운 선택 (진행중, 완료, 대기, 예정)
- [ ] 진척도 입력 (0-100%)
- [ ] 추가 설명 입력
- [ ] 예상 완료일 선택
- [ ] 이슈사항 입력
- [ ] 작업 시간 입력 (시간 단위)

#### 1.4 시간 자동 집계 확인
- [ ] 여러 카드에 작업 시간 입력
- [ ] 총 작업 시간이 자동으로 집계되는지 확인
- [ ] 시간 합계가 정확한지 확인

#### 1.5 임시 저장
- [ ] "임시 저장" 버튼 클릭
- [ ] 성공 메시지 표시 확인
- [ ] 페이지 새로고침 후 데이터가 유지되는지 확인
- [ ] 데이터베이스에서 `status: 'draft'` 확인

#### 1.6 주간보고 제출
- [ ] 모든 필수 정보 입력 완료
- [ ] "제출" 버튼 클릭
- [ ] 확인 다이얼로그 표시 확인
- [ ] 제출 성공 메시지 확인
- [ ] 공유 페이지로 자동 이동 확인
- [ ] 데이터베이스에서 `status: 'submitted'` 확인

---

### Phase 2: 주간보고 공유 페이지 테스트

#### 2.1 페이지 접속
- [ ] 보드 헤더의 "주간보고 공유" 버튼 클릭
- [ ] 또는 직접 URL 접속: `/board/[boardId]/weekly-report/share`
- [ ] 페이지가 정상적으로 로드되는지 확인

#### 2.2 주간 선택
- [ ] 주간 선택 드롭다운 표시 확인
- [ ] 이번 주, 지난 주 등 옵션 선택 가능 확인
- [ ] 선택한 주간의 보고서만 표시되는지 확인

#### 2.3 개인별 주간보고 표시
- [ ] 제출한 팀원들의 보고서가 표시되는지 확인
- [ ] 각 보고서에 다음 정보가 표시되는지 확인:
  - [ ] 사용자 이름/아바타
  - [ ] 완료된 작업 목록
  - [ ] 진행 중인 작업 목록
  - [ ] 진척도 프로그레스 바
  - [ ] 총 작업 시간
  - [ ] 제출 상태 (제출 완료/미제출)

#### 2.4 실시간 업데이트 테스트
- [ ] 공유 페이지를 두 개의 브라우저/탭에서 열기
- [ ] 한 브라우저에서 주간보고 수정/제출
- [ ] 다른 브라우저에서 자동으로 업데이트되는지 확인
- [ ] 새로고침 없이 데이터가 갱신되는지 확인

---

### Phase 3: 통합 테스트

#### 3.1 전체 워크플로우
- [ ] 보드에서 작업 수행 (카드 생성, 수정, 완료)
- [ ] 주간보고 작성 페이지 접속
- [ ] 자동 수집된 데이터 확인
- [ ] 보완 정보 입력
- [ ] 주간보고 제출
- [ ] 공유 페이지에서 확인

#### 3.2 권한 테스트
- [ ] 다른 사용자로 로그인
- [ ] 다른 사용자의 주간보고 수정 시도
- [ ] 권한 오류 메시지 표시 확인
- [ ] 자신의 주간보고만 수정 가능한지 확인

#### 3.3 중복 생성 방지
- [ ] 같은 주간에 주간보고 생성 시도
- [ ] 중복 오류 메시지 표시 확인
- [ ] 기존 보고서를 불러오는지 확인

---

## 🐛 발견된 문제 및 해결 방법

### 문제 1: 빌드 에러 (환경 변수)
**증상**: `@supabase/ssr: Your project's URL and API key are required`

**해결**:
1. `.env.local` 파일 확인
2. `NEXT_PUBLIC_SUPABASE_URL` 설정 확인
3. `NEXT_PUBLIC_SUPABASE_ANON_KEY` 설정 확인

### 문제 2: 페이지 접속 불가
**증상**: 404 에러 또는 페이지가 로드되지 않음

**해결**:
1. 개발 서버 재시작: `npm run dev`
2. 브라우저 캐시 삭제
3. URL 경로 확인: `/board/[boardId]/weekly-report/new` 또는 `/share`

### 문제 3: 데이터가 표시되지 않음
**증상**: 자동 수집된 데이터가 비어있음

**해결**:
1. 보드에 카드가 있는지 확인
2. 해당 주간에 작업이 있었는지 확인
3. 브라우저 콘솔에서 에러 확인
4. 네트워크 탭에서 API 호출 확인

### 문제 4: 실시간 업데이트가 작동하지 않음
**증상**: 다른 사용자가 수정해도 업데이트되지 않음

**해결**:
1. Supabase Realtime이 활성화되어 있는지 확인
2. `weekly_reports` 테이블에 Realtime 활성화 확인
3. 브라우저 콘솔에서 WebSocket 연결 확인

---

## 📊 테스트 결과 기록

### 테스트 일자: ___________

#### Phase 1: 주간보고 작성 페이지
- [ ] 페이지 접속: ✅ / ❌
- [ ] 자동 수집: ✅ / ❌
- [ ] 입력 기능: ✅ / ❌
- [ ] 저장 기능: ✅ / ❌
- [ ] 제출 기능: ✅ / ❌

**발견된 문제**:
- 

#### Phase 2: 주간보고 공유 페이지
- [ ] 페이지 접속: ✅ / ❌
- [ ] 데이터 표시: ✅ / ❌
- [ ] 실시간 업데이트: ✅ / ❌

**발견된 문제**:
- 

#### Phase 3: 통합 테스트
- [ ] 전체 워크플로우: ✅ / ❌
- [ ] 권한 테스트: ✅ / ❌
- [ ] 중복 방지: ✅ / ❌

**발견된 문제**:
- 

---

## 🎯 다음 단계

테스트 완료 후:
1. 발견된 문제를 `PROGRESS_STATUS.md`에 기록
2. 우선순위에 따라 버그 수정
3. UI/UX 개선 사항 수집
4. 추가 기능 요구사항 정리

---

**테스트를 시작하세요! 🚀**
